# Base Configuration (Defaults for all environments)
# This file provides sensible defaults that can be overridden by profile-specific configs

# Actor System
actor:
  mailbox:
    capacity: 10000
  dispatcher:
    threads: 10

# Hazelcast (default settings)
hazelcast:
  cluster:
    name: dev-cluster
  port: 5701
  port-auto-increment: true
  port-count: 100
  discovery:
    mode: multicast
  multicast:
    group: 224.2.2.3
    port: 54327
    timeout: 2
  map:
    backup-count: 1
    async-backup-count: 0
    eviction-policy: NONE
    max-size: 10000
  lite-member: false
  management:
    enabled: false

# Database (defaults)
database:
  pool:
    min: 5
    max: 20
    timeout: 30

  # PostgreSQL Provider Defaults
  postgres:
    host: localhost
    port: 5432
    database: postgres
    username: postgres
    password: postgres
    schema: public
    poolSize: 1
    maxPoolSize: 10
    connectionTimeout: 30
    idleTimeout: 600
    logQueries: false
  
  # MongoDB Provider Defaults
  mongodb:
    host: localhost
    port: 27017
    database: test
    username: ""
    password: ""
    replicaSet: ""
    connectionString: "mongodb://localhost:27017"
    poolSize: 1
    maxPoolSize: 10
    minPoolSize: 1
    maxConnectionIdleTime: 60000
    maxConnectionLifeTime: 0
    serverSelectionTimeout: 30000
  
  # ArangoDB Provider Defaults
  arangodb:
    host: localhost
    port: 8529
    database: _system
    username: root
    password: ""
    useSsl: false
    timeout: 10000
    maxConnections: 1
    acquireHostList: false
    loadBalancing: NONE
  
  # H2 Database Provider Defaults (In-Memory for Testing)
  h2:
    databaseName: test
    inMemory: true
    username: sa
    password: ""
  
  # AWS DynamoDB Provider Defaults
  dynamodb:
    region: us-east-1
    accessKeyId: ""
    secretAccessKey: ""
    endpointUrl: ""  # For local DynamoDB testing
    connectionTimeout: 10000
    requestTimeout: 30000
  
  # Azure CosmosDB Provider Defaults
  cosmosdb:
    endpoint: ""
    key: ""
    database: ""
    consistencyLevel: SESSION  # STRONG, BOUNDED_STALENESS, SESSION, CONSISTENT_PREFIX, EVENTUAL
    connectionMode: DIRECT  # DIRECT or GATEWAY
    maxRetryAttempts: 3
    requestTimeout: 60

  # Google Cloud Firestore Provider Defaults
  firestore:
    projectId: ""  # GCP Project ID (required)
    databaseId: "(default)"  # Firestore database ID
    credentialsPath: ""  # Path to service account JSON (optional - uses default credentials if not provided)
    emulatorHost: ""  # e.g., localhost:8080 for local Firestore emulator
    connectionTimeout: 30000
    requestTimeout: 60000

  # Google Cloud SQL Provider Defaults
  googlecloudsql:
    instanceConnectionName: ""  # Format: project:region:instance (e.g., "my-project:us-central1:my-instance")
    databaseType: postgresql  # Options: postgresql, mysql, sqlserver
    database: postgres  # Database name
    username: postgres  # Database user
    password: ""  # Database password
    schema: public  # Schema name (PostgreSQL/SQL Server only)
    enableIamAuth: false  # Use IAM database authentication
    credentialsPath: ""  # Path to service account JSON (optional - uses default credentials if not provided)
    poolSize: 1  # Connection pool minimum size (1 = no pooling)
    maxPoolSize: 10  # Connection pool maximum size
    connectionTimeout: 30  # Connection timeout in seconds
    idleTimeout: 600  # Idle connection timeout in seconds (10 minutes)
    logQueries: false  # Enable query logging for debugging
    # Optional: Direct TCP/IP connection (not recommended for production)
    host: ""  # Direct IP address (leave empty to use Cloud SQL Socket)
    port: null  # Direct port (leave null to use Cloud SQL Socket)






# Messaging (defaults)
messaging:
  # RabbitMQ (AMQP)
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
    virtualHost: /
    exchange: ""
    exchangeType: direct  # direct, fanout, topic, headers
    durable: true
    autoAck: false
  
  # Apache Kafka
  kafka:
    bootstrapServers: localhost:9092
    clientId: kafka-producer
    compression: none  # none, gzip, snappy, lz4, zstd
    idempotence: true
    acks: -1  # all replicas must acknowledge
    retries: 2147483647
    batchSize: 16384
    lingerMs: 0
    bufferMemory: 33554432
  
  # AWS SQS
  aws-sqs:
    region: us-east-1
    accessKeyId: ""  # Optional - uses default credential chain if not provided
    secretAccessKey: ""
    queueUrl: ""
    fifo: false
    delaySeconds: 0  # 0-900 seconds
    messageRetentionPeriod: 345600  # 4 days (in seconds)
    visibilityTimeout: 30
  
  # AWS SNS
  aws-sns:
    region: us-east-1
    accessKeyId: ""  # Optional - uses default credential chain if not provided
    secretAccessKey: ""
    topicArn: ""
  
  # Azure Service Bus
  azure-servicebus:
    connectionString: ""
    queueName: ""
    topicName: ""
    maxConcurrentCalls: 1
    prefetchCount: 0
    autoComplete: true
  
  # Apache ActiveMQ Artemis
  activemq:
    brokerUrl: tcp://localhost:61616
    username: admin
    password: admin
    queueName: ""
    topicName: ""
    persistent: true
    priority: 4  # 0-9
    sessionTransacted: false
    acknowledgeMode: AUTO_ACKNOWLEDGE
  
  # Vert.x Event Bus (uses existing Vert.x dependency)
  vertx-eventbus:
    publishMode: false  # false = send (point-to-point), true = publish (broadcast)
    clustered: false
    localOnly: true

# Security (defaults)
security:
  jwt:
    enabled: false
  tls:
    enabled: false

# Logging
logging:
  level: INFO

# Monitoring
monitoring:
  enabled: false

# Object Storage (defaults)
objectstorage:
  # AWS S3
  aws-s3:
    region: us-east-1
    accessKeyId: ""  # Optional - uses default credential chain if not provided
    secretAccessKey: ""
    endpoint: ""  # Optional - for S3-compatible services
    pathStyleAccess: false
    connectionTimeout: 10000
    requestTimeout: 30000
    maxConnections: 50
    enableAcceleration: false
  
  # Azure Blob Storage
  azure-blob:
    accountName: ""
    accountKey: ""
    connectionString: ""  # Alternative to accountName/accountKey
    endpoint: ""  # Optional - for custom endpoints
    sasToken: ""  # Optional - for SAS token authentication
    connectionTimeout: 30000
    requestTimeout: 60000
    maxRetryAttempts: 3
  
  # Google Cloud Storage
  gcs:
    projectId: ""  # GCP Project ID (required)
    credentialsPath: ""  # Path to service account JSON (optional - uses default credentials if not provided)
    endpoint: ""  # Optional - for emulator or custom endpoint
    connectionTimeout: 30000
    requestTimeout: 60000
  
  # MinIO (S3-compatible)
  minio:
    endpoint: http://localhost:9000
    accessKey: minioadmin
    secretKey: minioadmin
    region: us-east-1
    pathStyleAccess: true
    connectionTimeout: 10000
    requestTimeout: 30000
    maxConnections: 50
  
  # Garage (S3-compatible)
  garage:
    endpoint: http://localhost:3900
    accessKey: ""
    secretKey: ""
    region: garage
    pathStyleAccess: true
    connectionTimeout: 10000
    requestTimeout: 30000
    maxConnections: 50

# TaskGraph Persistence
taskgraph:
  persistence:
    enabled: false
    baseDir: "graphState"
    snapshotOn: "failure"  # Options: always, failure, never
    compression: false
    retentionPolicy:
      maxSnapshots: 2
      maxRetries: 2
